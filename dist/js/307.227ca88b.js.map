{"version":3,"file":"js/307.227ca88b.js","mappings":"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","sources":["webpack://lib_client/./src/views/MyInformation.vue","webpack://lib_client/src/views/MyInformation.vue","webpack://lib_client/./src/views/MyInformation.vue?a687","webpack://lib_client/./src/views/MyInformation.vue?8b63"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticStyle:{\"width\":\"30%\",\"margin\":\"0 auto\",\"margin-top\":\"15%\"}},[_c('el-form',{ref:\"user\",staticStyle:{\"text-align\":\"center\"},attrs:{\"rules\":_vm.rules,\"model\":_vm.user,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"uid\"}},[_c('el-input',{staticStyle:{\"width\":\"218px\"},attrs:{\"disabled\":\"true\"},model:{value:(_vm.user.uid),callback:function ($$v) {_vm.$set(_vm.user, \"uid\", $$v)},expression:\"user.uid\"}})],1),_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"uname\"}},[_c('el-input',{staticStyle:{\"width\":\"218px\"},attrs:{\"disabled\":_vm.edit},model:{value:(_vm.user.uname),callback:function ($$v) {_vm.$set(_vm.user, \"uname\", $$v)},expression:\"user.uname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"uphone\"}},[_c('el-input',{staticStyle:{\"width\":\"218px\"},attrs:{\"disabled\":_vm.edit},model:{value:(_vm.user.uphone),callback:function ($$v) {_vm.$set(_vm.user, \"uphone\", $$v)},expression:\"user.uphone\"}})],1),(!_vm.edit)?_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"password\"}},[_c('el-input',{staticStyle:{\"width\":\"218px\"},attrs:{\"show-password\":\"\",\"disabled\":_vm.edit},on:{\"blur\":_vm.pwdCheck},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}})],1):_vm._e(),(!_vm.edit)?_c('el-form-item',{attrs:{\"label\":\"确认新密码\",\"prop\":\"_password\"}},[_c('el-input',{staticStyle:{\"width\":\"218px\"},attrs:{\"show-password\":\"\",\"disabled\":_vm.edit},on:{\"blur\":_vm._pwdCheck},model:{value:(_vm.user._password),callback:function ($$v) {_vm.$set(_vm.user, \"_password\", $$v)},expression:\"user._password\"}})],1):_vm._e(),(_vm.edit)?_c('el-form-item',[_c('el-button',{staticStyle:{\"margin-right\":\"55px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.setEdit}},[_vm._v(\"编辑 \")])],1):_vm._e(),(!_vm.edit)?_c('el-form-item',[_c('el-button',{staticStyle:{\"margin-right\":\"55px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"提交 \")]),_c('el-button',{staticStyle:{\"margin-right\":\"55px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.noEdit}},[_vm._v(\"取消 \")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div style=\"width: 30%;margin: 0 auto;margin-top: 15%;\">\n        <el-form ref=\"user\" :rules=\"rules\" style=\"text-align: center;\"\n                :model=\"user\" label-width=\"150px\">\n\n            <el-form-item label=\"用户名\" prop=\"uid\">\n                <el-input v-model=\"user.uid\" style=\"width: 218px\" disabled=\"true\"\n                ></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"姓名\" prop=\"uname\">\n                <el-input v-model=\"user.uname\" style=\"width: 218px\" :disabled=\"edit\">\n                </el-input>\n            </el-form-item>\n\n            <el-form-item label=\"手机号\" prop=\"uphone\">\n                <el-input v-model=\"user.uphone\" style=\"width: 218px\" :disabled=\"edit\">\n                </el-input>\n            </el-form-item> \n\n            <el-form-item label=\"新密码\" prop=\"password\" v-if=\"!edit\">\n                <el-input show-password v-model=\"user.password\" style=\"width: 218px\"\n                          :disabled=\"edit\" v-on:blur=\"pwdCheck\">\n                </el-input>\n            </el-form-item>\n\n            <el-form-item label=\"确认新密码\" prop=\"_password\" v-if=\"!edit\">\n                <el-input show-password v-model=\"user._password\" style=\"width: 218px\"\n                          :disabled=\"edit\"\n                v-on:blur=\"_pwdCheck\">\n                </el-input>\n            </el-form-item>\n\n            <el-form-item v-if=\"edit\">\n                <el-button type=\"primary\" style=\"margin-right: 55px;\" @click=\"setEdit\">编辑\n                </el-button>\n            </el-form-item>\n\n            <el-form-item v-if=\"!edit\">\n                <el-button type=\"primary\" style=\"margin-right: 55px;\" @click=\"submitForm\">提交\n                </el-button>\n                <el-button type=\"primary\" style=\"margin-right: 55px;\" @click=\"noEdit\">取消\n                </el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nconst options = {\n    data() {\n        return {\n            edit: true,\n            user:{\n                uid:'',\n                uname:'',\n                uphone:'',\n                _password:'',//确认密码\n                password:''\n            },\n            rules: {\n                uname: [\n                    {required: true, message: '请输入姓名', trigger: 'blur'}\n                ],\n                uphone: [\n                    {required: true, message: '请输入手机号', trigger: 'blur'}\n                ],\n                password: [\n                    {required: true, message: ' ', trigger: 'blur'}\n                ],\n                _password: [\n                    {required: true, message: ' ', trigger: 'blur'}\n                ]\n            }\n        };\n    },\n    created(){\n        this.user.uid = this.$store.state.user.uid;\n        this.refresh();\n    },\n    methods:{\n        //获取用户信息\n        refresh(){\n            axios.get('/api/users/'+this.user.uid).then(res => {\n                // console.log(res);\n                if (res.data.code === 20041) {\n                    this.user = res.data.data;\n                    this.user.password = null;\n                } else {\n                    this.$message({\n                        message: '获取用户信息失败',\n                        type: 'error'\n                    });\n                    //跳转到主页面\n                    this.$router.push({path: '/home/book-manage'});\n                }\n            })\n        },\n        //检查密码是否为空\n        pwdCheck(){\n            if(this.user.password == '' || this.user.password == null){\n                this.$message({\n                    message: '请输入密码',\n                    type: 'error'\n                });\n                return false;\n            }\n            return true;\n        },\n        //检查两次密码是否一致\n        _pwdCheck(){\n            if(!this.pwdCheck()){\n                return;\n            }\n            if(this.user._password == '' || this.user._password == null){\n                this.$message({\n                    message: '请再次输入密码',\n                    type: 'error'\n                });\n                return false;\n            }else if(this.user.password !== this.user._password){\n                this.$message({\n                    message: '两次输入的密码不一致',\n                    type: 'error'\n                });\n                return false;\n            }\n            return true;\n        },\n        //取消编辑\n        noEdit(){\n            this.edit = true;\n        },\n        //编辑\n        setEdit(){\n            this.edit = false;\n        },\n        //提交\n        submitForm(){\n            if(!this._pwdCheck()){\n                return;\n            }\n            if(this.user === null || this.user.uid === ''\n                || this.user.uname === '' || this.user.uphone === ''){\n                this.$message({\n                    message: '请填写完整信息',\n                    type: 'error'\n                });\n            }else{\n                axios.put('/api/users', this.user).then(res => {\n                    // console.log(res);\n                    if (res.data.code === 20031) {\n                        this.$message({\n                            message: '修改成功',\n                            type: 'success'\n                        });\n                    } else {\n                        this.$message({\n                            message: '修改失败',\n                            type: 'error'\n                        });\n                    }\n                    this.refresh();\n                    this.edit = true;\n                })\n            }\n        }\n    }\n    \n}\nexport default options;\n</script>\n<style>\n.rg_table {\n    margin-top: 60px;\n    border-spacing: 10px;\n}\n\n.rg_bg{\n    width: 100%;\n    height: 100vh;\n    margin: auto;\n    background-image: linear-gradient(to right, #fbc2eb, #a6c1ee);\n    position: absolute;\n    height: 100%;\n}\n\n.rg_layout {\n    width: 900px;\n    height: 500px;\n    border: 5px solid #EEEEEE;\n    border-radius: 15px;\n    background-color: white;\n    /*让div水平居中*/\n    margin: auto;\n    margin-top: 11%;\n}\n\n.rg_left {\n    float: left;\n    margin: 15px;\n    width: 20%;\n}\n\n.rg_left>p:first-child {\n    color: #FFD026;\n    font-size: 20px;\n}\n\n.rg_left>p:last-child {\n    color: #A6A6A6;\n}\n\n.rg_center {\n    float: left;\n    width: 450px;\n    margin: 15px;\n}\n\n.rg_right {\n    float: right;\n    margin: 15px;\n}\n\n.rg_right>p:first-child {\n    font-size: 15px;\n}\n\n.rg_right p a {\n    color: #a6c1ee;\n}\n\n.td_left {\n    width: 100px;\n    text-align: right;\n    height: 45px;\n}\n\n.td_right {\n    padding-left: 50px;\n}\n\n#username,\n#password,\n#_password,\n#email,\n#name,\n#tel,\n#checkcode,\n#birthday {\n    width: 251px;\n    height: 32px;\n    border: 1px solid #A6A6A6;\n    /*设置边框圆角*/\n    border-radius: 5px;\n    padding-left: 10px;\n}\n\n#checkcode {\n    width: 110px;\n}\n\n#img_check {\n    margin-left: 15px;\n    height: 40px;\n    /*设置垂直居中*/\n    vertical-align: middle;\n}\n\n#btn_sub {\n    border-radius: 8px;\n    width: 150px;\n    height: 40px;\n    background-color: #FFD026;\n    border: 1px solid #FFD026;\n    margin-top: 20px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyInformation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyInformation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MyInformation.vue?vue&type=template&id=1c16329a\"\nimport script from \"./MyInformation.vue?vue&type=script&lang=js\"\nexport * from \"./MyInformation.vue?vue&type=script&lang=js\"\nimport style0 from \"./MyInformation.vue?vue&type=style&index=0&id=1c16329a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_setupProxy","staticStyle","ref","attrs","rules","user","model","value","uid","callback","$$v","$set","expression","edit","uname","uphone","_e","on","pwdCheck","password","_pwdCheck","_password","setEdit","_v","submitForm","noEdit","staticRenderFns","options","data","required","message","trigger","created","$store","state","refresh","methods","axios","then","res","code","$message","type","$router","push","path","component"],"sourceRoot":""}