"use strict";(self["webpackChunklib_client"]=self["webpackChunklib_client"]||[]).push([[553],{5553:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var r=function(){var e=this,s=e._self._c;e._self._setupProxy;return s("div",{staticClass:"rg_bg"},[s("div",{staticClass:"rg_layout"},[e._m(0),s("div",{staticClass:"rg_center"},[s("div",{staticClass:"rg_form"},[s("form",{attrs:{action:"#",method:"post"}},[s("table",{staticClass:"rg_table"},[s("tr",[e._m(1),s("td",{staticClass:"td_right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.uid,expression:"user.uid"}],attrs:{type:"text",name:"username",id:"username",placeholder:"请输入用户名"},domProps:{value:e.user.uid},on:{blur:e.idBlur,input:function(s){s.target.composing||e.$set(e.user,"uid",s.target.value)}}})])]),s("tr",[e._m(2),s("td",{staticClass:"td_right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.uname,expression:"user.uname"}],attrs:{type:"text",name:"name",id:"name",placeholder:"请输入姓名"},domProps:{value:e.user.uname},on:{blur:e.nameBlur,input:function(s){s.target.composing||e.$set(e.user,"uname",s.target.value)}}})])]),s("tr",[e._m(3),s("td",{staticClass:"td_right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.uphone,expression:"user.uphone"}],attrs:{type:"text",name:"tel",id:"tel",placeholder:"请输入手机号"},domProps:{value:e.user.uphone},on:{blur:e.phoneBlur,input:function(s){s.target.composing||e.$set(e.user,"uphone",s.target.value)}}})])]),s("tr",[e._m(4),s("td",{staticClass:"td_right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"请输入密码"},domProps:{value:e.user.password},on:{blur:e.pwdBlur,input:function(s){s.target.composing||e.$set(e.user,"password",s.target.value)}}})])]),s("tr",[e._m(5),s("td",{staticClass:"td_right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e._password,expression:"_password"}],attrs:{type:"password",name:"_password",id:"_password",placeholder:"请再次输入密码"},domProps:{value:e._password},on:{blur:e._pwdBlur,input:function(s){s.target.composing||(e._password=s.target.value)}}})])]),s("tr",[e._m(6),s("td",{staticClass:"td_right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkCode,expression:"checkCode"}],attrs:{type:"text",name:"checkcode",id:"checkcode",placeholder:"请输入验证码"},domProps:{value:e.checkCode},on:{blur:e.checkCodeBlur,keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.register.apply(null,arguments)},input:function(s){s.target.composing||(e.checkCode=s.target.value)}}}),s("img",{attrs:{id:"img_check",src:"/api/checkCode",title:"看不清?点击换一张",alt:"加载失败"},on:{click:e.freshCheckCode}})])]),s("tr",[s("td",{attrs:{colspan:"2",align:"center"}},[s("input",{attrs:{type:"button",id:"btn_sub",value:"注册"},on:{click:e.register}})])])])])])]),s("div",{staticClass:"rg_right"},[s("p",[e._v("已有账号? "),s("a",{attrs:{href:"/#/"},on:{click:e.goLogin}},[e._v("立即登录")])])])])])},a=[function(){var e=this,s=e._self._c;e._self._setupProxy;return s("div",{staticClass:"rg_left"},[s("p",[e._v("新用户注册")]),s("p",[e._v("USER REGISTER")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("td",{staticClass:"td_left"},[s("label",{attrs:{for:"username"}},[e._v("用户名")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("td",{staticClass:"td_left"},[s("label",{attrs:{for:"name"}},[e._v("姓名")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("td",{staticClass:"td_left"},[s("label",{attrs:{for:"tel"}},[e._v("手机号")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("td",{staticClass:"td_left"},[s("label",{attrs:{for:"password"}},[e._v("密码")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("td",{staticClass:"td_left"},[s("label",{attrs:{for:"password"}},[e._v("确认密码")])])},function(){var e=this,s=e._self._c;e._self._setupProxy;return s("td",{staticClass:"td_left"},[s("label",{attrs:{for:"checkcode"}},[e._v("验证码")])])}],i=(t(7658),t(4161));const o={data(){return{_password:"",checkCode:"",isExist:!1,user:{uid:"",uname:"",uphone:"",password:""}}},methods:{goLogin(){this.$store.commit("setFlash",!0),this.$router.push({path:"/login"})},freshCheckCode(){document.getElementById("img_check").src="/api/checkCode?id="+(new Date).getTime()},idBlur(){return""===this.user.uid?(this.$message({message:"请输入账号",type:"error"}),!1):this.user.uid.length<5||this.user.uid.length>12?(this.$message({message:"账号长度为5-12位",type:"error"}),!1):/^[a-zA-Z0-9_]+$/.test(this.user.uid)?void i.Z.get("/api/users/id/"+this.user.uid).then((e=>20041===e.data.code?(this.isExist=!0,this.$message({message:e.data.msg,type:"error"}),!1):20040===e.data.code?(this.isExist=!1,this.$message({message:e.data.msg,type:"success"}),!0):void 0)).catch((e=>{console.log(e)})):(this.$message({message:"账号只能由字母、数字、下划线组成",type:"error"}),!1)},nameBlur(){return""!==this.user.uname||(this.$message({message:"请输入姓名",type:"error"}),!1)},phoneBlur(){return""===this.user.uphone?(this.$message({message:"请输入手机号",type:"error"}),!1):11!==this.user.uphone.length?(this.$message({message:"手机号长度为11位",type:"error"}),!1):/^[1][3,4,5,7,8][0-9]{9}$/.test(this.user.uphone)?!!/^[0-9]+$/.test(this.user.uphone)||void this.$message({message:"手机号必须是数字",type:"error"}):(this.$message({message:"手机号格式不正确",type:"error"}),!1)},pwdBlur(){return""===this.user.password?(this.$message({message:"请输入密码",type:"error"}),!1):this.user.password.length<4||this.user.password.length>12?(this.$message({message:"密码长度为4-12位",type:"error"}),!1):/^[a-zA-Z0-9_]+$/.test(this.user.password)?this.user.password!==this.user.uid||(this.$message({message:"密码不能与账号相同",type:"error"}),!1):(this.$message({message:"密码只能由字母、数字、下划线组成",type:"error"}),!1)},_pwdBlur(){return""===this._password||null==this._password?(this.$message({message:"请再次输入密码",type:"error"}),!1):this._password===this.user.password||(this.$message({message:"两次密码不一致",type:"error"}),!1)},checkCodeBlur(){return""!==this.checkCode||(this.$message({message:"请输入验证码",type:"error"}),!1)},register(){return""===this.user.uid||""===this.user.uname||""===this.user.uphone||""===this.user.password||""===this._password||""===this.checkCode?(this.$message({message:"请填写完整信息",type:"error"}),!1):!0===this.isExist?(this.$message({message:"此账号已存在，请换一个",type:"error"}),!1):void i.Z.post("/api/users/register",{user:this.user,checkCode:this.checkCode}).then((e=>{3e4===e.data.code?(this.$message({message:"注册成功",type:"success"}),this.freshCheckCode(),this.$router.push({path:"/"})):(this.$message({message:e.data.msg,type:"error"}),this.freshCheckCode())}))}},mounted(){this.freshCheckCode(),this.$nextTick((()=>{document.title="注册"}))}};var u=o,d=u,n=t(3736),l=(0,n.Z)(d,r,a,!1,null,null,null),h=l.exports}}]);
//# sourceMappingURL=553.3e069ed4.js.map