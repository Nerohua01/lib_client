"use strict";(self["webpackChunklib_client"]=self["webpackChunklib_client"]||[]).push([[307],{2307:function(e,s,t){t.r(s),t.d(s,{default:function(){return n}});var r=function(){var e=this,s=e._self._c;e._self._setupProxy;return s("div",{staticStyle:{width:"30%",margin:"0 auto","margin-top":"15%"}},[s("el-form",{ref:"user",staticStyle:{"text-align":"center"},attrs:{rules:e.rules,model:e.user,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"uid"}},[s("el-input",{staticStyle:{width:"218px"},attrs:{disabled:"true"},model:{value:e.user.uid,callback:function(s){e.$set(e.user,"uid",s)},expression:"user.uid"}})],1),s("el-form-item",{attrs:{label:"姓名",prop:"uname"}},[s("el-input",{staticStyle:{width:"218px"},attrs:{disabled:e.edit},model:{value:e.user.uname,callback:function(s){e.$set(e.user,"uname",s)},expression:"user.uname"}})],1),s("el-form-item",{attrs:{label:"手机号",prop:"uphone"}},[s("el-input",{staticStyle:{width:"218px"},attrs:{disabled:e.edit},model:{value:e.user.uphone,callback:function(s){e.$set(e.user,"uphone",s)},expression:"user.uphone"}})],1),e.edit?e._e():s("el-form-item",{attrs:{label:"新密码",prop:"password"}},[s("el-input",{staticStyle:{width:"218px"},attrs:{"show-password":"",disabled:e.edit},on:{blur:e.pwdCheck},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1),e.edit?e._e():s("el-form-item",{attrs:{label:"确认新密码",prop:"_password"}},[s("el-input",{staticStyle:{width:"218px"},attrs:{"show-password":"",disabled:e.edit},on:{blur:e._pwdCheck},model:{value:e.user._password,callback:function(s){e.$set(e.user,"_password",s)},expression:"user._password"}})],1),e.edit?s("el-form-item",[s("el-button",{staticStyle:{"margin-right":"55px"},attrs:{type:"primary"},on:{click:e.setEdit}},[e._v("编辑 ")])],1):e._e(),e.edit?e._e():s("el-form-item",[s("el-button",{staticStyle:{"margin-right":"55px"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交 ")]),s("el-button",{staticStyle:{"margin-right":"55px"},attrs:{type:"primary"},on:{click:e.noEdit}},[e._v("取消 ")])],1)],1)],1)},i=[],a=(t(7658),t(4161));const u={data(){return{edit:!0,user:{uid:"",uname:"",uphone:"",_password:"",password:""},rules:{uname:[{required:!0,message:"请输入姓名",trigger:"blur"}],uphone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:" ",trigger:"blur"}],_password:[{required:!0,message:" ",trigger:"blur"}]}}},created(){this.user.uid=this.$store.state.user.uid,this.refresh()},methods:{refresh(){a.Z.get("/api/users/"+this.user.uid).then((e=>{20041===e.data.code?(this.user=e.data.data,this.user.password=null):(this.$message({message:"获取用户信息失败",type:"error"}),this.$router.push({path:"/home/book-manage"}))}))},pwdCheck(){return""!=this.user.password&&null!=this.user.password||(this.$message({message:"请输入密码",type:"error"}),!1)},_pwdCheck(){if(this.pwdCheck())return""==this.user._password||null==this.user._password?(this.$message({message:"请再次输入密码",type:"error"}),!1):this.user.password===this.user._password||(this.$message({message:"两次输入的密码不一致",type:"error"}),!1)},noEdit(){this.edit=!0},setEdit(){this.edit=!1},submitForm(){this._pwdCheck()&&(null===this.user||""===this.user.uid||""===this.user.uname||""===this.user.uphone?this.$message({message:"请填写完整信息",type:"error"}):a.Z.put("/api/users",this.user).then((e=>{20031===e.data.code?this.$message({message:"修改成功",type:"success"}):this.$message({message:"修改失败",type:"error"}),this.refresh(),this.edit=!0})))}}};var l=u,o=l,d=t(3736),p=(0,d.Z)(o,r,i,!1,null,null,null),n=p.exports}}]);
//# sourceMappingURL=307.227ca88b.js.map